//引入hooks
import { createStore, combineReducers, compose, applyMiddleware } from "redux";
import thunk from "redux-thunk";

//创建Reducer,state相当于vuex的state,action为vuex的action，异步改变，所以用
const counter = function (state = { count: 1, count2: 22 }, action) {
  switch (action.type) {
    case "COUNT_ADD":
      return {
        count: state.count + 1,
        count2: state.count2 + 2,
      };
    case "COUNT_REDUCE":
      return {
        count: state.count - 1,
        count2: state.count2 - 2,
      };
    default:
      return {
        ...state,
      };
  }
};

const post = function (
  state = { list: [{ title: "你好" }], test: "ljm", token: "ljm" },
  action
) {
  switch (action.type) {
    case "LOAD_POST":
      return {
        ...state,
        list: action.payload,
        test: action.data,
      };
    
    default:
      return {
        ...state,
      };
  }
};
const ticketState = {
  from: "北京",
  to: "上海",
  isCitySelectorVisible: false,
  currentSelectingLeftCity: false,
  cityData: null,
  isLoadingCityData: false,
  isDateSelectorVisible: false,
  departDate: Date.now(),
  highSpeed: false,
  cities: [
    "安顺",
    "安阳",
    "鞍山",
    "安图",
    "安多",
    "霸州",
    "白银市",
    "保定",
    "巴中",
    "北票",
    "包头",
    "北碚",
    "蚌埠",
    "博鳌",
    "宝鸡",
    "宾阳",
    "白河东",
    "北京",
    "滁州",
    "昌图",
    "承德",
    "重庆",
    "赤壁",
    "长寿",
    "沧州",
    "郴州",
    "巢湖",
    "赤峰",
    "长兴",
    "朝阳",
    "长沙",
    "长汀",
    "长治",
    "长春",
    "常州",
    "澄城",
    "茶陵",
    "成都",
    "德兴",
    "大安",
    "定州",
    "东营",
    "东方",
    "东莞",
    "大连",
    "丹东",
    "东胜",
    "丹阳",
    "大武口",
    "大石头",
    "定西",
    "东乡",
    "德州",
    "都匀",
    "德清",
    "大庆",
    "鄂州",
    "峨眉",
    "富县",
    "丰城",
    "扶余",
    "抚州",
    "富源",
    "枫林",
    "佛山",
    "抚顺",
    "涪陵",
    "福州",
    "福鼎",
    "福山镇",
    "阜新",
    "高碑店",
    "巩义",
    "盖州",
    "瓜州",
    "古田",
    "贵定",
    "高台",
    "广州",
    "广安",
    "贵阳",
    "广汉",
    "广元",
    "官厅",
    "古浪",
    "桂林",
    "高密",
    "公主岭",
    "侯马",
    "葫芦岛",
    "华容",
    "华山",
    "惠州",
    "衡水",
    "邯郸",
    "淮南",
    "合肥",
    "淮北",
    "杭州",
    "哈尔滨",
    "洪洞",
    "红安",
    "黄冈",
    "霍州",
    "怀仁",
    "海口",
    "鹤壁",
    "黄山",
    "合阳",
    "淮安",
    "呼和浩特",
    "海城",
    "衡阳",
    "怀化",
    "湟源",
    "黄陵",
    "黄石",
    "海宁",
    "衡山",
    "精河",
    "嘉兴",
    "晋中",
    "进贤",
    "缙云",
    "金华",
    "介休",
    "景德镇",
    "晋城",
    "嘉峪关",
    "嘉善",
    "胶州",
    "绩溪北",
    "佳木斯",
    "济南",
    "蛟河",
    "建瓯",
    "焦作",
    "锦州",
    "江油",
    "昆明",
    "昆山",
    "开封",
    "凯里",
    "开原",
    "柳州",
    "鹿寨",
    "拉萨",
    "漯河",
    "凌源",
    "娄底",
    "来宾",
    "临泽",
    "耒阳",
    "乐都",
    "临汾",
    "临沂",
    "柳园",
    "灵石",
    "廊坊",
    "洛阳",
    "梁平",
    "乐昌",
    "兰州",
    "兰考",
    "灵宝",
    "醴陵",
    "莱西",
    "连云港",
    "隆昌",
    "民权",
    "茂名",
    "渑池",
    "眉山",
    "马鞍山",
    "蒙自",
    "闽清",
    "明港",
    "汨罗",
    "麻城",
    "南宁",
    "南靖",
    "宁东",
    "南京",
    "南芬",
    "南平北",
    "南充",
    "内江",
    "南昌",
    "宁波",
    "宁强南",
    "彭山",
    "平安驿",
    "平泉",
    "普宁",
    "平原",
    "平遥",
    "平凉",
    "平顶山",
    "蒲城",
    "萍乡",
    "青岛",
    "曲靖",
    "清远",
    "曲阜",
    "齐齐哈尔",
    "泉州",
    "青州市",
    "祁县",
    "钦州",
    "祁东",
    "清水",
    "祁阳",
    "岐山",
    "如东",
    "瑞昌",
    "荣昌",
    "日照",
    "三水",
    "上杭",
    "上虞",
    "鄯善",
    "深圳",
    "苏州",
    "神木",
    "三明",
    "韶关",
    "宿州",
    "三门峡",
    "邵阳",
    "绍兴",
    "四平",
    "石家庄",
    "沈阳",
    "韶山",
    "山阴",
    "歙县",
    "龙市",
    "石桥",
    "石林",
    "上海",
    "商丘",
    "三亚",
    "绥中",
    "狮山",
    "顺德",
    "桐梓",
    "铜陵",
    "天门",
    "通远堡",
    "铁岭",
    "田东",
    "唐山",
    "通辽",
    "太原",
    "太谷",
    "天津",
    "天水",
    "桃村",
    "滕州",
    "吐鲁番",
    "泰安",
    "图们",
    "梧州",
    "威海",
    "武义",
    "温州",
    "武威",
    "乌海",
    "武夷山",
    "乌鲁木齐",
    "潍坊",
    "武昌",
    "渭南",
    "无锡",
    "闻喜",
    "万州",
    "孝感",
    "新化",
    "咸阳",
    "咸宁",
    "信阳",
    "西安",
    "新晃",
    "襄阳",
    "忻州",
    "仙游",
    "许昌",
    "襄汾",
    "溆浦",
    "徐州",
    "邢台",
    "厦门",
    "旬阳",
    "湘潭",
    "修武",
    "新乡",
    "新余",
    "西昌",
    "兴安",
    "玉屏",
    "营口",
    "鹰潭",
    "阳泉",
    "义县",
    "玉山",
    "岳阳",
    "永康",
    "永川",
    "攸县",
    "杨陵",
    "弋江",
    "玉门",
    "英德",
    "余姚",
    "延吉",
    "烟台",
    "禹城",
    "银滩",
    "永济",
    "宜昌",
    "盐城",
    "运城",
    "宜春",
    "株洲",
    "卓资东",
    "张掖",
    "遵义",
    "漳州",
    "涿州",
    "资阳",
    "织金",
    "郑州",
    "淄博",
    "资中",
    "驻马店",
    "枣庄",
    "中宁",
    "镇江",
    "中山",
    "湛江",
    "珠海",
    "肇庆",
    "樟树",
  ],
};

const ticket = (state = ticketState, action) => {
  switch (action.type) {
    case "Add_Cities":
      return {
        cities: action.payload,
      };
      case "Change":
        return Object.assign({}, state, {
           [action.key]:action.value
        })
        // return {
        //   ...state,
        //   [action.key]:action.value
        // };
        case "Exchange_FromTo":
      return{
        from:state.to,
        to:state.from
      }
    default:
      return {
        ...state,
      };
  }
};

//合并reducer
const rootReducer = combineReducers({
  counter,
  post,
  ticket,
});

const store = createStore(rootReducer, compose(applyMiddleware(...[thunk])));

// applyMiddleware 是启用 redux-thunk 中间件
export { store };
